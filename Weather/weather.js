String.prototype.getString=function(d,c){var b=this.indexOf(d);if(b<0){return""}b+=+d.length;if(c){var a=this.indexOf(c,b);if(a<0){return""}return this.substr(b,a-b).trim().replace("&nbsp;"," ")}else{return this.substr(b).replace("&nbsp;"," ")}};String.prototype.removeComment=function(){var b="";var a=0;while(true){var d=this.indexOf("<!--",a);if(d<0){break}b+=this.substr(a,d-a);var c=this.indexOf("-->",d+1);if(c<0){break}a=c+1}return b.replace("&nbsp;"," ")};String.prototype.removeHtmlTag=function(){var d=this.indexOf("<");if(d<0){return this}var b="";var a=0;while(true){b+=this.substr(a,d-a);var c=this.indexOf(">",d+1);if(c<0){break}a=c+1;d=this.indexOf("<",a);if(d<0){break}}return b.replace("&nbsp;"," ")};String.prototype.getTdText=function(){var a=this.getString(">","</td>");return a.removeHtmlTag().trim()};String.prototype.format=function(b){if(arguments.length>0){var a=this;if(arguments.length==1&&typeof(b)=="object"){for(var d in b){var e=new RegExp("({"+d+"})","g");a=a.replace(e,b[d])}}else{for(var c=0;c<arguments.length;c++){if(arguments[c]==undefined){return""}else{var e=new RegExp("({["+c+"]})","g");a=a.replace(e,arguments[c])}}}return a}else{return this}};function getImageName(a){return a.getString("29x20/",".gif")}function getQTs(b){var a="http://flash.weather.com.cn/sk2/"+b+".xml";var g=getContent(a);var j=g.split("<qw");var c="";for(var e=1;e<j.length;e++){var k=j[e];var d=k.getString('wd="','"');var i=k.getString('sd="','"');var f=k.getString('h="','"');qt='{"wd":"{0}","sd":"{1}","h":"{2}"}'.format(d,i,f);if(c.length==0){c="["+qt}else{c+=",\n"+qt}}if(c.length>0){c+="]"}return c}function getRealWeather(c){var a="http://www.weather.com.cn/data/sk/"+c+".html";var b=getContent(a);return b.getString('{"weatherinfo":',"}")+"}"}function getWeather(b){var H=(b.length==2);var x="";if(H){x=document.body.innerHTML}else{var f="http://www.weather.com.cn/html/weather/"+b+".shtml";x=getContent(f)}var F=x.getString('id="live">',"<!--");var e;var G;var q=x.getString("今日日出日落时间","</dd>");if(q){G=q.getString('<strong style="font-size:16px;color:#000;font-weight:bold;">',"</strong>");e=q.getString('<strong style="font-size:16px;color:#000;font-weight:bold;">',"</strong>");q=x.getString("明日日出日落时间","</dd>");sunrise2=q.getString('<strong style="font-size:16px;color:#000;font-weight:bold;">',"</strong>");sunset2=q.getString('<strong style="font-size:16px;color:#000;font-weight:bold;">',"</strong>")}else{q=x.getString("<p><b>今日</b>","</span></p>");G=q.getString("<span>","</span>");e=q.getString("</span><span>");q=x.getString("<p><b>明日</b>","</span></p>");sunrise2=q.getString("<span>","</span>");sunset2=q.getString("</span><span>")}x=x.removeComment();var j=x.getString("逐6小时天气预报 （","发布）");q=x.getString('<div class="weatherYubaoBox">',"      </div>");var l=q.split('<table class="yuBaoTable"');var t="";for(var v=1;v<l.length;v++){var E=l[v];var r=E.split("<tr>");var D="";if(r.length>2){var C=r[1].split("<td ");var B=C[1].getTdText();var n=getImageName(C[3]);var s=C[4].getTdText();var h=C[5].getTdText().getString(" ");var o=C[6].getTdText();C=r[2].split("<td ");var g=getImageName(C[2]);var k=C[3].getTdText();var y=C[4].getTdText().getString(" ");var i=C[5].getTdText();D='{"day":"{0}","imageD":"{1}","weatherD":"{2}","hTemp":"{3}","windN":"{4}","imageN":"{5}", "weatherN":"{6}", "lTemp":"{7}","windN":"{8}"}'.format(B,n,s,h,o,g,k,y,i)}else{var C=r[1].split("<td ");var B=C[1].getTdText();var n=getImageName(C[3]);var s=C[4].getTdText();var h=C[5].getTdText().getString(" ");var o=C[6].getTdText();var A=C[2].getTdText();if(A=="白天"){D='{"day":"{0}","imageD":"{1}","weatherD":"{2}","hTemp":"{3}","windD":"{4}"}'.format(B,n,s,h,o)}else{D='{"day":"{0}","imageN":"{1}","weatherN":"{2}","lTemp":"{3}","windN":"{4}"}'.format(B,n,s,h,o)}}if(D.length>0){if(t.length==0){t="["+D}else{t+=",\n"+D}}}if(t.length>0){t+="]"}q=x.getString('div id="aboutZS"','<div class="adposter_6123">');var a=q.split("<li");var z="";for(var v=1;v<a.length;v++){var p=a[v];var d=p.getString('title="','"');var I=p.getString("<aside><b>","</b>").trim();var u=p.getString('class="detail ','"');if(d.length==0){d=p.getString("<h3><a><b>","</b>")}var c=p.getString("</b>","</aside>").trim();var w='{"name":"{0}", "strength":"{1}", "comment":"{2}", "pic":"{3}"}'.format(d,I,c,u);if(z.length==0){z="["+w}else{z+=","+w}}if(z.length>0){z+="]"}t='{"today":"{0}","time":"{1}","sunrise":"{2}","sunset":"{3}","sunrise2":"{4}","sunset2":"{5}", "weather":"{6}",\n"weathers":{7},\n"points":{8}}'.format(F,j,G,e,sunrise2,sunset2,s,t,z);if(H){alert(t)}return t}function allPoints(){return'["穿衣指数", "感冒指数", "洗车指数", "舒适度指数", "运动指数", "晨练指数", "太阳镜指数", "旅游指数", "化妆指数", "紫外线指数", "逛街指数", "美发指数", "雨伞指数", "交通指数", "路况指数", "钓鱼指数", "划船指数", "约会指数", "晾晒指数", "防晒指数"]'}function getDefaultCities(){return'["010101", "020101", "280101"]'};